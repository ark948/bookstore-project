{% extends "_base.html" %}
{% load humanize %}

{% block content %}
    لیست کتاب ها
    <p>
        <a href="{% url 'shop:add-book' %}" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">افزودن +</a>
    </p>

    <p>
        <a href="{% url 'shop:add-book-test' %}" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">افزودن تست+</a>
    </p>

    <div class="overflow-x-auto">
        <table class="table table-md">
          <thead>
            <tr>
              <th>#</th>
              <th>عنوان</th>
              <th>نویسنده</th>
              <th>انتشارات</th>
              <th>ژانر</th>
              <th>زبان</th>
              <th>زبان اصلی</th>
              <th>چاپ</th>
              <th>تعداد صفحه</th>
              <th>تاریخ انتشار</th>
              <th>فرمت چاپ</th>
              <th>ISBN</th>
              <th>مترجم</th>
              <th>امتیاز</th>
              <th>موجود</th>
              <th>قیمت</th>
              <th>تعداد موجودی</th>
            </tr>
          </thead>
          <tbody>
            {% for book in books %}
            <tr>
              <th>{{ forloop.counter }}</th>
              <td>{{ book.title }}</td>
              <td>
                {% for i in book.authors.all %}
                    {% if i.fa_name %}
                      [{{ i.fa_name }}]
                    {% else %}
                      [{{ i.en_name }}]
                    {% endif %}
                {% endfor %}
              </td>
              <td>{{ book.publisher }}</td>
              <td>
                {% for i in book.genres.all %}
                  [{{ i.title }}]
                {% endfor %}
              </td>
              <td>{{ book.language }}</td>
              <td>{{ book.original_language }}</td>
              <td>
                {% if book.edition %}
                  {{ book.edition }}
                {% else %}
                  یافت نشد
                {% endif %}
              </td>
              <td>{{ book.page_count }}</td>
              <td>{{ book.pub_date }}</td>
              <td>{{ book.format }}</td>
              <td>
                {% if book.ISBN %}
                  {{ book.ISBN }}
                {% else %}
                  یافت نشد
                {% endif %}
              </td>
              <td>
                {% for i in book.translator.all %}
                  {% if i %}
                    {{ i.name }}
                  {% else %}
                    -
                  {% endif %}
                {% empty %}
                  -
                {% endfor %}
              </td>
              <td>
                {% if book.rating %}
                  {{ book.rating }}
                {% else %}
                  -
                {% endif %}
              </td>
              <td>
                {% if book.available %}
                  <span>&#10003;</span>
                {% else %}
                  <span>&#10007;</span>
                {% endif %}
              </td>
              <td>
                {% if book.available %}
                  {{ book.price|floatformat:"0g" }} &nbsp تومان
                {% else %}
                  -
                {% endif %}
              </td>
              <td>
                {% if book.available %}
                  {{ book.copies_available }}
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
          <tfoot>
            
          </tfoot>
        </table>
      </div>

{% endblock content %}